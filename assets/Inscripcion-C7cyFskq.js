import{r as d,j as e,z as U,A as ne,D as X,E as z,L as w,G as L,H as ce,I as le}from"./vendor-CXadzovC.js";import{N as q,C as p,a as j,b as f,c as E,d as b,B as F}from"./card-BiroM1Ra.js";import{F as oe}from"./firebase-DUZ5dv6p.js";import{L as l,I as m}from"./label-C92x6ROV.js";import{c as G,I as de,S as H,d as J,e as me,f as $,g as ue,L as O,h as K,i as xe,j as pe,k as Q,l as he,m as ge,n as W,o as je}from"./radix-C1F2jKhp.js";import{c as u,a as fe,u as be}from"./index-tDwwKiLS.js";import{C as Y}from"./capacity-indicator-DZJqCgmn.js";const S=he,k=ge,v=d.forwardRef(({className:t,children:c,...i},g)=>e.jsxs(G,{ref:g,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[c,e.jsx(de,{asChild:!0,children:e.jsx(U,{className:"h-4 w-4 opacity-50"})})]}));v.displayName=G.displayName;const Z=d.forwardRef(({className:t,...c},i)=>e.jsx(H,{ref:i,className:u("flex cursor-default items-center justify-center py-1",t),...c,children:e.jsx(ne,{className:"h-4 w-4"})}));Z.displayName=H.displayName;const _=d.forwardRef(({className:t,...c},i)=>e.jsx(J,{ref:i,className:u("flex cursor-default items-center justify-center py-1",t),...c,children:e.jsx(U,{className:"h-4 w-4"})}));_.displayName=J.displayName;const y=d.forwardRef(({className:t,children:c,position:i="popper",...g},C)=>e.jsx(me,{children:e.jsxs($,{ref:C,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...g,children:[e.jsx(Z,{}),e.jsx(ue,{className:u("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:c}),e.jsx(_,{})]})}));y.displayName=$.displayName;const Ne=d.forwardRef(({className:t,...c},i)=>e.jsx(O,{ref:i,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...c}));Ne.displayName=O.displayName;const h=d.forwardRef(({className:t,children:c,...i},g)=>e.jsxs(K,{ref:g,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xe,{children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(pe,{children:c})]}));h.displayName=K.displayName;const ve=d.forwardRef(({className:t,...c},i)=>e.jsx(Q,{ref:i,className:u("-mx-1 my-1 h-px bg-muted",t),...c}));ve.displayName=Q.displayName;const ee=d.forwardRef(({className:t,...c},i)=>e.jsx("textarea",{className:u("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...c}));ee.displayName="Textarea";const ae=d.forwardRef(({className:t,...c},i)=>e.jsx(W,{ref:i,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...c,children:e.jsx(je,{className:u("flex items-center justify-center text-current"),children:e.jsx(X,{className:"h-4 w-4"})})}));ae.displayName=W.displayName;const Ie=()=>{d.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const{toast:t}=fe(),{addRegistration:c,stats:i,isLoading:g}=be(),[C,R]=d.useState(!1),[D,V]=d.useState(!1),A=i.total,B=i.max,M=new Date<new Date("2025-10-04T23:59:59-06:00"),I=i.capacityFull,se=g,[s,o]=d.useState({nombre:"",dni:"",nacimiento:"",email:"",telefono:"",club:"",distancia:"",sexo:"",emergenciaNombre:"",emergenciaTel:"",medico:"",banco:"",monto:"",referencia:"",tallaCamisa:"",comprobante:null}),re=["BAC Honduras"],te=["14","16","XS","S","M","L","XL","XXL"],P=(a,r)=>{if(!a||!r)return"";const x=new Date(a),n=new Date("2025-10-12").getFullYear()-x.getFullYear();return r==="800m"?n>=11&&n<=12?"Infantiles B (11-12)":n>=13&&n<=14?"Juveniles A (13-14)":"Masters":n>=15&&n<=17?"Juveniles B (15-17)":n>=18&&n<=30?"20-30":n>=31&&n<=40?"30-40":"40+"},ie=async a=>{if(a.preventDefault(),!D){t({variant:"destructive",title:"Error",description:"Debes aceptar el reglamento para continuar"});return}if(!s.tallaCamisa){t({variant:"destructive",title:"Error",description:"Selecciona la talla de camisa."});return}const r=new Date(s.nacimiento),x=new Date("2025-10-12"),T=x.getFullYear()-r.getFullYear()-(x.getMonth()<r.getMonth()||x.getMonth()===r.getMonth()&&x.getDate()<r.getDate()?1:0);if(Number.isNaN(T)||T<11){t({variant:"destructive",title:"Edad no permitida",description:"La edad mínima para participar es de 11 años."});return}if(!M){t({variant:"destructive",title:"Inscripciones cerradas",description:"El período de inscripciones ha terminado"});return}if(!navigator.onLine){t({variant:"destructive",title:"Sin conexión",description:"Verifica tu conexión a internet antes de continuar."});return}if(se){t({title:"Cargando información",description:"Espera a que se actualice la disponibilidad de cupos antes de continuar."});return}if(I){t({variant:"destructive",title:"Cupo agotado",description:"Ya no hay cupos disponibles para este evento"});return}R(!0);try{const n=P(s.nacimiento,s.distancia);if(!n){t({variant:"destructive",title:"Error",description:"No pudimos determinar tu categoría. Verifica tu fecha de nacimiento y distancia."});return}const N=await c({nombre:s.nombre.trim(),dni:s.dni.trim(),nacimiento:s.nacimiento,email:s.email.trim(),telefono:s.telefono.trim(),club:s.club.trim(),distancia:s.distancia,sexo:s.sexo,categoria:n,emergenciaNombre:s.emergenciaNombre.trim(),emergenciaTel:s.emergenciaTel.trim(),medico:s.medico.trim(),banco:s.banco,monto:s.monto.trim(),referencia:s.referencia.trim(),tallaCamisa:s.tallaCamisa,comprobanteFile:s.comprobante});t({title:"¡Inscripción registrada!",description:"Te contactaremos para validar tu pago."}),o({nombre:"",dni:"",nacimiento:"",email:"",telefono:"",club:"",distancia:"",sexo:"",emergenciaNombre:"",emergenciaTel:"",medico:"",banco:"",monto:"",referencia:"",tallaCamisa:"",comprobante:null}),V(!1)}catch(n){let N="No se pudo procesar tu inscripción. Intenta nuevamente.";n instanceof oe?n.code.includes("network")||n.code==="unavailable"?N="No pudimos conectar con el servidor. Verifica tu conexión a internet e intenta nuevamente.":n.code==="storage/unauthorized"?N="No tienes permisos para subir el comprobante. Contacta al administrador.":N=n.message:n instanceof Error&&(N=n.message==="No hay cupos disponibles"?"Ya no hay cupos disponibles para este evento.":n.message),t({variant:"destructive",title:"Error",description:N})}finally{R(!1)}};return!M&&!I?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(q,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:e.jsxs(p,{className:"text-center",children:[e.jsxs(j,{children:[e.jsx(z,{className:"h-16 w-16 text-destructive mx-auto mb-4"}),e.jsx(f,{className:"text-2xl",children:"Inscripciones Cerradas"}),e.jsx(E,{className:"text-lg",children:"El período de inscripciones terminó el 4 de octubre de 2025"})]}),e.jsx(b,{children:e.jsx(w,{to:"/",children:e.jsxs(F,{children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Volver al inicio"]})})})]})})]}):I?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(q,{}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-16",children:e.jsxs(p,{className:"text-center",children:[e.jsxs(j,{children:[e.jsx(z,{className:"h-16 w-16 text-destructive mx-auto mb-4"}),e.jsx(f,{className:"text-2xl",children:"Cupo Agotado"}),e.jsx(E,{className:"text-lg",children:"Ya no hay cupos disponibles para este evento"})]}),e.jsxs(b,{children:[e.jsx(Y,{current:A,max:B,className:"mb-6"}),e.jsx(w,{to:"/",children:e.jsxs(F,{children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Volver al inicio"]})})]})]})})]}):e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(q,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx(w,{to:"/",children:e.jsxs(F,{variant:"ghost",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Volver al inicio"]})})}),e.jsx(p,{className:"card-gradient shadow-card mb-8",children:e.jsxs(j,{className:"text-center",children:[e.jsx(f,{className:"text-3xl text-primary",children:"Formulario de Inscripción"}),e.jsx(E,{className:"text-lg",children:"Completa todos los campos para inscribirte al Encuentro de Aguas Abiertas Los Naranjos"}),e.jsx(Y,{current:A,max:B,className:"mt-4"})]})}),e.jsxs("form",{onSubmit:ie,className:"space-y-8",children:[e.jsxs(p,{className:"card-gradient shadow-card",children:[e.jsx(j,{children:e.jsx(f,{className:"text-xl text-primary",children:"Datos Personales"})}),e.jsxs(b,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nombre",children:"Nombre Completo *"}),e.jsx(m,{id:"nombre",value:s.nombre,onChange:a=>o(r=>({...r,nombre:a.target.value})),required:!0,placeholder:"Tu nombre completo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"dni",children:"Identidad/DNI *"}),e.jsx(m,{id:"dni",value:s.dni,onChange:a=>o(r=>({...r,dni:a.target.value})),required:!0,placeholder:"0801-1990-12345"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"nacimiento",children:"Fecha de Nacimiento *"}),e.jsx(m,{id:"nacimiento",type:"date",value:s.nacimiento,onChange:a=>o(r=>({...r,nacimiento:a.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"tallaCamisa",children:"Talla de Camisa *"}),e.jsxs(S,{value:s.tallaCamisa,onValueChange:a=>o(r=>({...r,tallaCamisa:a})),children:[e.jsx(v,{id:"tallaCamisa",children:e.jsx(k,{placeholder:"Selecciona la talla"})}),e.jsx(y,{children:te.map(a=>e.jsx(h,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email *"}),e.jsx(m,{id:"email",type:"email",value:s.email,onChange:a=>o(r=>({...r,email:a.target.value})),required:!0,placeholder:"tu@email.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"telefono",children:"Teléfono *"}),e.jsx(m,{id:"telefono",value:s.telefono,onChange:a=>o(r=>({...r,telefono:a.target.value})),required:!0,placeholder:"9999-9999"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"club",children:"Club/Equipo *"}),e.jsx(m,{id:"club",value:s.club,onChange:a=>o(r=>({...r,club:a.target.value})),required:!0,placeholder:"Nombre de tu club o equipo"})]})]})]}),e.jsxs(p,{className:"card-gradient shadow-card",children:[e.jsx(j,{children:e.jsx(f,{className:"text-xl text-primary",children:"Datos de Competencia"})}),e.jsxs(b,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"distancia",children:"Distancia *"}),e.jsxs(S,{value:s.distancia,onValueChange:a=>o(r=>({...r,distancia:a})),required:!0,children:[e.jsx(v,{children:e.jsx(k,{placeholder:"Selecciona la distancia"})}),e.jsxs(y,{children:[e.jsx(h,{value:"800m",children:"800 metros"}),e.jsx(h,{value:"2km",children:"2 kilómetros"}),e.jsx(h,{value:"5km",children:"5 kilómetros"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"sexo",children:"Sexo *"}),e.jsxs(S,{value:s.sexo,onValueChange:a=>o(r=>({...r,sexo:a})),required:!0,children:[e.jsx(v,{children:e.jsx(k,{placeholder:"Selecciona tu sexo"})}),e.jsxs(y,{children:[e.jsx(h,{value:"F",children:"Femenino"}),e.jsx(h,{value:"M",children:"Masculino"})]})]})]}),s.distancia&&s.nacimiento&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{children:"Categoría"}),e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsx("span",{className:"font-semibold text-primary",children:P(s.nacimiento,s.distancia)})})]})]})]}),e.jsxs(p,{className:"card-gradient shadow-card",children:[e.jsx(j,{children:e.jsx(f,{className:"text-xl text-primary",children:"Contacto de Emergencia"})}),e.jsxs(b,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"emergenciaNombre",children:"Nombre *"}),e.jsx(m,{id:"emergenciaNombre",value:s.emergenciaNombre,onChange:a=>o(r=>({...r,emergenciaNombre:a.target.value})),required:!0,placeholder:"Nombre del contacto"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"emergenciaTel",children:"Teléfono *"}),e.jsx(m,{id:"emergenciaTel",value:s.emergenciaTel,onChange:a=>o(r=>({...r,emergenciaTel:a.target.value})),required:!0,placeholder:"9999-9999"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(l,{htmlFor:"medico",children:"Condición médica relevante (opcional)"}),e.jsx(ee,{id:"medico",value:s.medico,onChange:a=>o(r=>({...r,medico:a.target.value})),placeholder:"Medicamentos, alergias, condiciones médicas importantes...",rows:3})]})]})]}),e.jsxs(p,{className:"card-gradient shadow-card",children:[e.jsx(j,{children:e.jsx(f,{className:"text-xl text-primary",children:"Información de Pago"})}),e.jsxs(b,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"banco",children:"Banco/Plataforma *"}),e.jsxs(S,{value:s.banco,onValueChange:a=>o(r=>({...r,banco:a})),required:!0,children:[e.jsx(v,{children:e.jsx(k,{placeholder:"Selecciona el banco"})}),e.jsx(y,{children:re.map(a=>e.jsx(h,{value:a,children:a},a))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"monto",children:"Monto (L) *"}),e.jsx(m,{id:"monto",type:"number",step:"0.01",value:s.monto,onChange:a=>o(r=>({...r,monto:a.target.value})),required:!0,placeholder:"300.00"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(l,{htmlFor:"referencia",children:"Número de referencia/transacción *"}),e.jsx(m,{id:"referencia",value:s.referencia,onChange:a=>o(r=>({...r,referencia:a.target.value})),required:!0,placeholder:"Número de confirmación del pago"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"comprobante",children:"Comprobante de pago * (PDF, JPG, PNG - máx. 5MB)"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-lg p-6 text-center",children:[e.jsx(ce,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx(m,{id:"comprobante",type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:a=>o(r=>{var x;return{...r,comprobante:((x=a.target.files)==null?void 0:x[0])||null}}),required:!0,className:"max-w-sm mx-auto"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Sube tu comprobante de pago"})]})]})]})]}),e.jsx(p,{className:"card-gradient shadow-card",children:e.jsx(b,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ae,{id:"rules",checked:D,onCheckedChange:a=>V(a===!0),required:!0}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(l,{htmlFor:"rules",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Acepto el reglamento y deslinde de responsabilidad *"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Al inscribirme acepto las normas del evento y eximo de responsabilidad a los organizadores."," ",e.jsx(w,{to:"/reglamento",className:"text-primary hover:underline",children:"Leer reglamento completo"})]})]})]})})}),e.jsx("div",{className:"text-center",children:e.jsx(F,{type:"submit",size:"lg",className:"button-gradient shadow-button text-lg px-12 py-6",disabled:C||!D,children:C?e.jsx(e.Fragment,{children:"Procesando inscripción..."}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"mr-2 h-5 w-5"}),"Completar Inscripción"]})})})]})]})]})};export{Ie as default};
