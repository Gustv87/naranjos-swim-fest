import{r as c,j as e}from"./vendor-CvKrFYBg.js";import{N as f,C as i,d as x,a as g,b as y}from"./card-Cjxxdy58.js";import{F as S}from"./footer-CP3_GpQF.js";import{B as u}from"./badge-BtDIQfX8.js";import{u as b}from"./index-cgtXp0BU.js";import{L as w,S as C,a as v,b as A,c as T,d as h}from"./select-DvnaZnQZ.js";import"./button-PXHQ3is1.js";import"./radix-B4AvY2xt.js";import"./firebase-S-KbnFMc.js";const L={"800m":"800 metros","2km":"2 kilómetros","5km":"5 kilómetros"},E=["NT","NS","DNS","DNF"],k=l=>{if(!l)return"Pendiente";const o=l.toUpperCase();return E.includes(o)?o:l},m="__all__",P=()=>{const{registrations:l,isLoading:o}=b(),[d,j]=c.useState(m),N=c.useMemo(()=>{const t=new Set;return l.forEach(a=>{a.categoria&&t.add(a.categoria)}),Array.from(t).sort((a,s)=>a.localeCompare(s,"es"))},[l]),p=c.useMemo(()=>["800m","2km","5km"].map(a=>{const s=l.filter(r=>r.distancia===a&&(d===m||r.categoria===d)).sort((r,n)=>r.resultSeconds===null&&n.resultSeconds===null?r.createdAt>n.createdAt?1:-1:r.resultSeconds===null?1:n.resultSeconds===null?-1:r.resultSeconds-n.resultSeconds);return{distance:a,participants:s}}),[l,d]);return e.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[e.jsx(f,{}),e.jsx("main",{className:"flex-1 px-4 py-12",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-10",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(u,{variant:"secondary",className:"mx-auto w-fit",children:"Resultados en tiempo real"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-foreground",children:"Resultados Oficiales"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Los tiempos se actualizan automáticamente a medida que el equipo de administración los registra."}),e.jsxs("p",{className:"text-sm text-muted-foreground max-w-2xl mx-auto",children:["Notación especial: ",e.jsx("strong",{children:"NT"})," = No Time, ",e.jsx("strong",{children:"NS"})," = No Show. Estos atletas aparecen al final de la tabla."]})]}),e.jsx(i,{className:"card-gradient shadow-card",children:e.jsx(x,{className:"py-6",children:e.jsxs("div",{className:"max-w-sm mx-auto text-left space-y-2",children:[e.jsx(w,{htmlFor:"categoria",children:"Filtrar por categoría"}),e.jsxs(C,{value:d,onValueChange:j,children:[e.jsx(v,{id:"categoria",children:e.jsx(A,{placeholder:"Todas las categorías"})}),e.jsxs(T,{children:[e.jsx(h,{value:m,children:"Todas"}),N.map(t=>e.jsx(h,{value:t,children:t},t))]})]})]})})}),p.map(({distance:t,participants:a})=>e.jsxs(i,{className:"card-gradient shadow-card",children:[e.jsxs(g,{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx(y,{className:"text-2xl text-primary",children:L[t]??t}),e.jsxs(u,{variant:"outline",className:"text-sm",children:[a.length," nadador",a.length===1?"":"es"]})]}),e.jsx(x,{children:o?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"Cargando resultados..."}):a.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-6",children:"Aún no hay participantes registrados en esta distancia."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm md:text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border text-left",children:[e.jsx("th",{className:"py-3 px-3",children:"Posición"}),e.jsx("th",{className:"py-3 px-3",children:"Dorsal"}),e.jsx("th",{className:"py-3 px-3",children:"Nombre"}),e.jsx("th",{className:"py-3 px-3",children:"Categoría"}),e.jsx("th",{className:"py-3 px-3",children:"Tiempo"})]})}),e.jsx("tbody",{children:a.map((s,r)=>e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("td",{className:"py-3 px-3 font-semibold",children:s.resultSeconds!==null?r+1:"—"}),e.jsxs("td",{className:"py-3 px-3 font-mono text-xs md:text-sm whitespace-nowrap",children:["#",s.dorsal]}),e.jsx("td",{className:"py-3 px-3",children:s.nombre}),e.jsx("td",{className:"py-3 px-3 text-muted-foreground",children:s.categoria||"N/A"}),e.jsxs("td",{className:"py-3 px-3 font-medium",children:[k(s.resultTime),s.resultRecordedAt&&s.resultSeconds!==null&&e.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Actualizado ",new Date(s.resultRecordedAt).toLocaleString("es-HN")]})]})]},s.id))})]})})})]},t))]})}),e.jsx(S,{})]})};export{P as default};
